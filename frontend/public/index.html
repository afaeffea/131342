<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Юридический чат-бот</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="app">
      <!-- Auth View -->
      <section id="auth-view" class="auth-view">
        <div class="auth-container">
          <div class="auth-card">
            <div class="auth-header">
              <h1>Legal Expert</h1>
              <p>Юридический ассистент</p>
            </div>
            <div class="auth-tabs">
              <button id="tab-login" class="tab active">Вход</button>
              <button id="tab-register" class="tab">Регистрация</button>
            </div>

            <form id="login-form" class="form visible">
              <label class="field">
                <span>Email</span>
                <input type="email" name="email" required placeholder="your@email.com" />
              </label>
              <label class="field">
                <span>Пароль</span>
                <input type="password" name="password" required placeholder="••••••••" />
              </label>
              <button type="submit" class="btn-primary">Войти</button>
              <p class="form-hint">
                Нет аккаунта?
                <a href="#" id="to-register">Зарегистрироваться</a>
              </p>
            </form>

            <form id="register-form" class="form">
              <label class="field">
                <span>Email</span>
                <input type="email" name="email" required placeholder="your@email.com" />
              </label>
              <label class="field">
                <span>Пароль</span>
                <input type="password" name="password" required minlength="6" placeholder="••••••••" />
              </label>
              <button type="submit" class="btn-primary">Зарегистрироваться</button>
              <p class="form-hint">
                Уже есть аккаунт?
                <a href="#" id="to-login">Войти</a>
              </p>
            </form>

            <div id="auth-error" class="error-message"></div>
          </div>
        </div>
      </section>

      <!-- Chat View -->
      <section id="chat-view" class="chat-view hidden">
        <!-- Sidebar -->
        <aside class="sidebar">
          <button id="new-chat-btn" class="new-chat-btn">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 1V17M1 9H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Новый чат
          </button>
          <div class="sidebar-content">
            <div class="sidebar-section">
              <div class="sidebar-header">Диалоги</div>
              <div id="chat-history" class="chat-history">
                <!-- Список диалогов рендерится через JS -->
              </div>
            </div>
          </div>
          <div class="sidebar-footer">
            <div class="user-info">
              <span id="user-email" class="user-email"></span>
            </div>
            <button id="logout-btn" class="logout-btn">Выйти</button>
          </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="chat-main">
          <div id="chat-messages" class="chat-messages">
            <!-- Welcome message -->
            <div class="welcome-container">
              <div class="welcome-icon">⚖️</div>
              <h1>Legal Expert</h1>
              <p>Как я могу помочь вам сегодня?</p>
            </div>
          </div>

          <div class="chat-input-container">
            <form id="chat-form" class="chat-form">
              <div class="input-wrapper">
                <textarea
                  id="chat-input"
                  rows="1"
                  placeholder="Сообщение Legal Expert..."
                  maxlength="2000"
                ></textarea>
                <button type="submit" class="send-button" id="send-btn" disabled>
                  <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M16.5 1.5L8.25 9.75M16.5 1.5L10.5 16.5L8.25 9.75M16.5 1.5L1.5 7.5L8.25 9.75" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </form>
            <div id="chat-error" class="error-message chat-error"></div>
          </div>
        </main>
      </section>
    </div>

    <script src="/app.js"></script>
  </body>
</html>
